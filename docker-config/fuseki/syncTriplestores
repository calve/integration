#!/bin/sh

# Sync Folders Staging -> Production:
rm -rf /data/*
cp -r /newdata/* /data/.

# logging:
date +"%Y-%m-%d_%H-%M-%S Start Syncing TripleStores..." >> /var/log/syncTriplestores.log

# Restart Fuseki:
supervisorctl stop executor
kill -9 $(ps -ef | grep fuseki | grep -v grep | awk '{print $1}')
find . -name *.lock | xargs -i rm {}
supervisorctl start executor

# logging:
date +"%Y-%m-%d_%H-%M-%S Finished Syncing TripleStores..." >> /var/log/syncTriplestores.log